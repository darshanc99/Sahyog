{% extends 'home/base.html' %}
{% load static %}
<head>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'report/css/starter-template.css' %}">
</head>
{% block content %}
<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.js" integrity="sha256-o8aByMEvaNTcBsw94EfRLbBrJBI+c3mjna/j4LrfyJ8=" crossorigin="anonymous"></script>    
<div class="container">
	<br><h3>My Report</h3><hr>
	<div id="map"></div>
		<h4>Complaint Analysis:</h4>
</div>
<div class="container">
    <div class="row"> 
        <div class="col-sm-3"></div>
        <div class="col-sm-6">
        <canvas id="myChart" width="100" height="100">
            <script>
                $(document).ready(function(){
                var endpoint = '/api/charts/datas'
   
			  $.ajax({
			    method: "GET",
			    url: endpoint,
			    success: function(data){
			      var ctx = document.getElementById("myChart").getContext('2d');
			      var myChart = new Chart(ctx, {
			          type: 'bar',
			          data: {
			              labels: data.labels,
			              datasets: [{
			                  label: 'Number of Complaints',
			                  data: data.data,
			                  backgroundColor: [
			                      'rgba(255, 99, 132, 0.2)',
			                      'rgba(54, 162, 235, 0.2)',
			                      'rgba(255, 206, 86, 0.2)',
			                      'rgba(75, 192, 192, 0.2)',
			                      'rgba(153, 102, 255, 0.2)',
			                      'rgba(255, 159, 64, 0.2)'
			                  ],
			                  borderColor: [
			                      'rgba(255,99,132,1)',
			                      'rgba(54, 162, 235, 1)',
			                      'rgba(255, 206, 86, 1)',
			                      'rgba(75, 192, 192, 1)',
			                      'rgba(153, 102, 255, 1)',
			                      'rgba(255, 159, 64, 1)'
			                  ],
			                  borderWidth: 1
			              }]
			          },
			          options: {
			              reponsive: true,
			              scales: {
			                  yAxes: [{
			                      ticks: {
			                          beginAtZero:true
			                      }
			                  }]
			              }
			          }
			      });
			    },
			    error: function(error_data){
			      console.log(error_data)
			    }
			  })
                })
            </script>
        </canvas>
        </div>
        <div class="col-sm-3"></div>
    </div>
</div>


{% endblock content %}